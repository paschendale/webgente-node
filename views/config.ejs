<%- include('partials/admin/header.ejs') %> 


<div id='config'>
    <div class="container shadow-sm" id="container-form-layerdetails">
    <h3>Configurações Gerais do WebGENTE</h3>
    <hr>

    <form action="/config" method="post" novalidate onsubmit="return validateForm()">
        <div class="form-group">
            <label for="cityName"><strong>Nome do Município (Título do WebGENTE):</strong></label>
            <input type="text" class="form-control" id="cityName" name="cityName" value='<%=cityName%>'>
        </div>
        <div class="form-group">
            <label for="serverHost"><strong>Endereço do endpoint do Servidor de Mapas:</strong></label>
            <input type="text" class="form-control" id="serverHost" name="serverHost" value='<%=serverHost%>'>
        </div>
        <div class="form-group">
            <label for="serverUser"><strong>Usuário no Servidor de Mapas (alteração neste parâmetro exige um restart do sistema):</strong></label>
            <input type="text" class="form-control" id="serverUser" name="serverUser" value='<%=serverUser%>'>
        </div>
        <div class="form-group">
            <label for="serverPassword"><strong>Senha do Usuário no Servidor de Mapas (alteração neste parâmetro exigem um restart do sistema):</strong></label>
            <input type="password" class="form-control" id="serverPassword" name="serverPassword" value='<%=serverPassword%>'>
        </div>
        <div class="form-group">
            <label for="startupLat"><strong>Latitude de Inicialização:</strong></label>
            <input type="number" class="form-control" id="startupLat" name="startupLat" value='<%=startupLat%>'>
        </div>
        <div class="form-group">
            <label for="startupLong"><strong>Longitude de Inicialização:</strong></label>
            <input type="number" class="form-control" id="startupLong" name="startupLong" value='<%=startupLong%>'>
        </div>
        <div class="form-group">
            <label for="startupZoom"><strong>Zoom de Inicialização:</strong></label>
            <input type="number" class="form-control" id="startupZoom" name="startupZoom" value='<%=startupZoom%>'>
        </div>
        <div class="form-group">
            <label for="referenceSystem"><strong>Sistema de Referência:</strong></label>
            <input type="number" class="form-control" id="referenceSystem" min="0" step="1" name="referenceSystem" value='<%=referenceSystem%>'>
            <p>Utilizado para a exibição e pesquisa por coordenadas na ferramenta de coordenadas do WebGENTE.</p>
        </div>
        <button class="btn btn-dark" type='submit'>Salvar</button>
    </form>

    <script>
        function validateForm() {

            // Validação do sistema de referência
            if (!Number.isInteger(Number($('#referenceSystem').val()))) {                
                alert('O valor do sistema de referência deve ser um número inteiro')
                return false
            } else {
                return true
            }

            // TODO: Validação da senha e usuário do Geoserver
        }
    </script>
    </div>
</div>

<%- include('partials/admin/footer.ejs') %> 